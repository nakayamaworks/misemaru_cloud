<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Misemaru Cloud | Store Onboarding</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background: linear-gradient(135deg, #f5f7ff 0%, #ffffff 45%, #eef2ff 100%);
      min-height: 100vh;
      font-family: "Noto Sans JP", "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      color: #1f2937;
    }
    main {
      max-width: 900px;
      margin: 0 auto;
      padding: 3.5rem 1.5rem 4.5rem;
    }
    .language-switcher {
      display: flex;
      justify-content: flex-end;
      gap: .75rem;
      align-items: center;
      margin-bottom: 2rem;
    }
    .guide-card {
      border: none;
      border-radius: 18px;
      margin-bottom: 1.75rem;
      box-shadow: 0 18px 42px rgba(15, 23, 42, .08);
      background: rgba(255,255,255,.94);
    }
    .guide-card h2 {
      font-size: 1.3rem;
      font-weight: 700;
    }
    .guide-card ul {
      margin: 0;
      padding-left: 1.1rem;
      display: grid;
      gap: .6rem;
    }
    .guide-card li {
      line-height: 1.6;
      color: #475569;
    }
    .sheet-link {
      display: inline-block;
      margin-top: 0.5rem;
      background: #2563eb;
      color: #fff !important;
      padding: 0.55rem 1rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      transition: background .2s;
    }
    .sheet-link:hover { background: #1e40af; }
    .support-box {
      border-radius: 16px;
      padding: 1.75rem;
      background: rgba(37, 99, 235, .08);
      color: #1d4ed8;
    }
    .template-gallery img {
      width: 100%;
      height: auto;
      object-fit: cover;
      border-bottom: 1px solid #eee;
    }
    .sheet-link.disabled {
      background: #ccc !important;
      pointer-events: none;
      color: #fff !important;
    }
  </style>
</head>
<body>
  <main>
    <!-- è¨€èªåˆ‡æ›¿ -->
    <div class="language-switcher">
      <label for="createLangSelect" class="form-label mb-0" data-i18n="languageLabel">Language</label>
      <select id="createLangSelect" class="form-select form-select-sm" data-role="language-select"></select>
    </div>

    <header class="mb-4">
      <h1 class="fw-bold" data-i18n="createPageTitle">Store Onboarding Guide</h1>
      <p class="lead text-muted" data-i18n="createPageLead">Follow this checklist to prepare, deploy, and verify your Misemaru Cloud store.</p>
    </header>

    <!-- === ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠã‚»ã‚¯ã‚·ãƒ§ãƒ³ === -->
    <section class="template-gallery mb-5">
      <h2 class="mb-3 fw-bold" data-i18n="templateGalleryTitle">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸ã¶</h2>
      <p class="text-muted" data-i18n="templateGalleryLead">
        ä»¥ä¸‹ã‹ã‚‰ãŠå¥½ããªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸ã‚“ã§ã€ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚
      </p>

      <div class="row g-4">
        <!-- ç„¡æ–™ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ -->
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="card h-100 shadow-sm border-0">
            <img src="img/template_free.jpg" class="card-img-top rounded-top" alt="Free Template Preview">
            <div class="card-body text-center">
              <h5 class="card-title text-success fw-bold" data-i18n="templateFree">ç„¡æ–™ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h5>
              <a id="templateLink" class="sheet-link" href="#" target="_blank" data-i18n="openTemplate">ğŸ“„ Open Template</a>
                ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’é–‹ã
              </a>
            </div>
          </div>
        </div>

        <!-- æœ‰å„Ÿãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ1 -->
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="card h-100 shadow-sm border-0">
            <img src="img/template_premium1.jpg" class="card-img-top rounded-top" alt="Premium Template 1 Preview">
            <div class="card-body text-center">
              <h5 class="card-title text-warning fw-bold" data-i18n="templatePremium1">æœ‰å„Ÿãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ #1</h5>
              <a href="#" class="sheet-link d-block mt-2 disabled" style="background:#ccc;pointer-events:none;" data-i18n="templateComingSoon">
                ğŸ”’ æº–å‚™ä¸­
              </a>
            </div>
          </div>
        </div>

        <!-- æœ‰å„Ÿãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ2 -->
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="card h-100 shadow-sm border-0">
            <img src="img/template_premium2.jpg" class="card-img-top rounded-top" alt="Premium Template 2 Preview">
            <div class="card-body text-center">
              <h5 class="card-title text-warning fw-bold" data-i18n="templatePremium2">æœ‰å„Ÿãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ #2</h5>
              <a href="#" class="sheet-link d-block mt-2 disabled" style="background:#ccc;pointer-events:none;" data-i18n="templateComingSoon">
                ğŸ”’ æº–å‚™ä¸­
              </a>
            </div>
          </div>
        </div>

        <!-- æœ‰å„Ÿãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ3 -->
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="card h-100 shadow-sm border-0">
            <img src="img/template_premium3.jpg" class="card-img-top rounded-top" alt="Premium Template 3 Preview">
            <div class="card-body text-center">
              <h5 class="card-title text-warning fw-bold" data-i18n="templatePremium3">æœ‰å„Ÿãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ #3</h5>
              <a href="#" class="sheet-link d-block mt-2 disabled" style="background:#ccc;pointer-events:none;" data-i18n="templateComingSoon">
                ğŸ”’ æº–å‚™ä¸­
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ã‚¹ãƒ†ãƒƒãƒ—1 -->
    <section class="guide-card card">
      <div class="card-body p-4">
        <h2 class="mb-3">â‘  <span data-i18n="createStepAppsScript">Copy the template spreadsheet and configure script properties.</span></h2>
        <ul>
          <li data-i18n="copyStep1">Open the template below and choose â€œFile â†’ Make a copyâ€</li>
          <p class="text-muted small" data-i18n="copyStep1_note"></p>
          <li data-i18n="copyStep2">In the â€œCopy documentâ€ window, change the name freely and click â€œMake a copyâ€ with all three boxes unchecked.</li>
          <p class="text-muted small" data-i18n="copyStep2_note"></p>
          <li data-i18n="copyStep3">A linked Apps Script project will be created automatically once the copy is made.</li>
          <p class="text-muted small" data-i18n="copyStep3_note"></p>
        </ul>
      </div>
    </section>

    <!-- ã‚¹ãƒ†ãƒƒãƒ—2 -->
    <section class="guide-card card">
      <div class="card-body p-4">
        <h2 class="mb-3">â‘¡ <span data-i18n="timezoneTitle">Set your timezone</span></h2>
        <ul>
          <li data-i18n="timezoneStep1">Open â€œExtensions â†’ Apps Scriptâ€.</li>
          <li data-i18n="timezoneStep2">Click the âš™ï¸ icon â†’ Project Settings.</li>
          <li data-i18n="timezoneStep3">Set the timezone to your local region (e.g. Asia/Tokyo).</li>
        </ul>
      </div>
    </section>

    <!-- ã‚¹ãƒ†ãƒƒãƒ—3 -->
    <section class="guide-card card">
      <div class="card-body p-4">
        <h2 class="mb-3">â‘¢ <span data-i18n="createStepDeploy">Deploy the GAS web app and note the execution URL.</span></h2>
        <ul>
          <li data-i18n="deployStep1">Click â€œDeploy â†’ New deploymentâ€.</li>
          <li data-i18n="deployStep2">Select â€œWeb Appâ€ and set access to â€œAnyone (even anonymous)â€.</li>
          <li data-i18n="deployStep3">Copy the generated URL (e.g. https://script.google.com/macros/s/.../exec).</li>
        </ul>
      </div>
    </section>

    <!-- ã‚¹ãƒ†ãƒƒãƒ—4 -->
    <section class="guide-card card">
      <div class="card-body p-4">
        <h2 class="mb-3">â‘£ <span data-i18n="createStepRegistry">Submit your store info to the Misemaru registry.</span></h2>
        <ul>
          <li data-i18n="sendInfo1">Send the following details to <strong>support@misemaru.cloud</strong>:</li>
          <li data-i18n="sendInfo2">â€¢ Store name<br>â€¢ GAS deploy URL<br>â€¢ Desired store path (e.g. /nakayama_seikotsuin)<br>â€¢ Timezone</li>
          <li data-i18n="sendInfo3">Youâ€™ll receive your official store URL (e.g. https://misemaru.cloud/nakayama_seikotsuin/) after verification.</li>
        </ul>
      </div>
    </section>

    <!-- ã‚µãƒãƒ¼ãƒˆ -->
    <section class="support-box mb-4">
      <h2 class="h5 fw-semibold mb-2" data-i18n="createContactTitle">Need help?</h2>
      <p class="mb-0" data-i18n="createContactBody">Reach out to support@misemaru.cloud for assistance.</p>
    </section>

    <a class="btn btn-outline-primary" href="index.html" data-i18n="backToPortal">Back to portal</a>
  </main>

  <script src="js/config.js"></script>
  <script type="module" src="js/portal.js"></script>
  
  <script>
    const SUPPORTED_LANGS = [
      { code: "ja", label: "æ—¥æœ¬èª" },
      { code: "en", label: "English" },
      { code: "zh-CN", label: "ä¸­æ–‡" },
      { code: "es", label: "EspaÃ±ol" },
      { code: "ko", label: "í•œêµ­ì–´" },
    ];

    // è¨€èªé¸æŠUIç”Ÿæˆ
    const select = document.getElementById("createLangSelect");
    SUPPORTED_LANGS.forEach(lang => {
      const opt = document.createElement("option");
      opt.value = lang.code;
      opt.textContent = lang.label;
      select.appendChild(opt);
    });

    // ç¾åœ¨ã®è¨€èªã‚’ãƒ­ãƒ¼ãƒ‰
    const savedLang = localStorage.getItem("mm_lang") || navigator.language || "ja";
    const currentLang = SUPPORTED_LANGS.find(l => savedLang.startsWith(l.code))?.code || "ja";
    select.value = currentLang;

    // ãƒ†ã‚­ã‚¹ãƒˆåˆ‡ã‚Šæ›¿ãˆé–¢æ•°
    function applyLanguage(lang) {
      if (typeof DICT === "undefined") {
        console.error("DICT not loaded yet");
        return;
      }
      localStorage.setItem("mm_lang", lang);
      const dict = DICT[lang] || DICT.ja;
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.dataset.i18n;
        if (dict[key]) el.innerHTML = dict[key];
      });
      document.documentElement.lang = lang;
    }

    // è¨€èªå¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆ
    select.addEventListener("change", e => applyLanguage(e.target.value));

    // åˆæœŸé©ç”¨
    document.addEventListener("DOMContentLoaded", () => {
      applyLanguage(currentLang);
    });

    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ³ã‚¯è¨­å®š
    document.addEventListener("DOMContentLoaded", () => {
      const link = document.getElementById("templateLink");
      if (window.CONFIG?.TEMPLATE_SHEET_URL) {
        link.href = window.CONFIG.TEMPLATE_SHEET_URL;
      } else {
        link.textContent = "âš  Template URL not set";
      }
    });
  </script>
</body>
</html>